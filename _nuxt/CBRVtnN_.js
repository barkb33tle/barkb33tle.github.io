import{_ as E}from"./9muQgpWI.js";import{_ as M,u as T}from"./CZkhVsdt.js";import{g as U,j as V,k as w,l as D,r as O,m as S,n as j,c as o,p as c,b as C,q as s,a as e,F as d,s as m,t as u,w as y,o as t,d as z,v as x,T as F,x as G}from"./IDOWRAUd.js";const P={key:0,class:"empty-state"},X={key:1,class:"empty-state"},q={key:2,class:"page-section"},I={class:"page-header"},K={class:"breadcrumbs","aria-label":"Breadcrumb"},Q={key:0},R={key:0},H={key:0},J={class:"child-grid"},W={key:0,class:"gallery-grid"},Y=["onClick","aria-label"],Z=["src","alt"],ee={key:1,class:"empty-state"},te={class:"modal-content"},se=["src","alt"],re=U({__name:"[[...slug]]",async setup(oe){let _,g;const h=V(),B=w(()=>{const l=h.params.slug;return l?Array.isArray(l)?l:[l]:[]}),k=w(()=>B.value.filter(Boolean).join("/")),{data:a,pending:N,error:L}=([_,g]=D(()=>T(()=>{const l=k.value?`/api/folders/${k.value}`:"/api/folders";return $fetch(l)},{watch:[()=>h.fullPath],server:!0},"$ph6rk6XQ5N")),_=await _,g(),_),i=O(null),$=l=>{console.log("Opening modal for image:",l.name),i.value=l},p=()=>{i.value=null},f=l=>{l.key==="Escape"&&p()};return S(()=>{window.addEventListener("keydown",f)}),j(()=>{window.removeEventListener("keydown",f)}),(l,r)=>{const v=E,A=M;return t(),o(d,null,[s(L)?(t(),o("section",P,[...r[0]||(r[0]=[e("p",null,"Unable to load this folder. Check your Google Drive credentials and try again.",-1)])])):s(N)&&!s(a)?(t(),o("section",X,[...r[1]||(r[1]=[e("p",null,"Loading portfolioâ€¦",-1)])])):s(a)?(t(),o("section",q,[e("header",I,[e("nav",K,[(t(!0),o(d,null,m(s(a).breadcrumbs,(n,b)=>(t(),o(d,{key:n.route},[C(v,{to:n.route},{default:y(()=>[z(u(n.label),1)]),_:2},1032,["to"]),b<s(a).breadcrumbs.length-1?(t(),o("span",Q,"/")):c("",!0)],64))),128))]),e("div",null,[e("h1",null,u(s(a).name),1),s(a).description?(t(),o("p",R,u(s(a).description),1)):c("",!0)])]),s(a).children.length?(t(),o("section",H,[r[2]||(r[2]=e("p",{class:"section-title"},"Collections",-1)),e("div",J,[(t(!0),o(d,null,m(s(a).children,n=>(t(),x(v,{key:n.id,to:n.route,class:"child-card"},{default:y(()=>[e("h3",null,u(n.name),1),e("span",null,u(n.images.length)+" artworks",1)]),_:2},1032,["to"]))),128))])])):c("",!0),e("section",null,[r[4]||(r[4]=e("p",{class:"section-title"},"Gallery",-1)),s(a).images.length?(t(),o("div",W,[(t(!0),o(d,null,m(s(a).images,n=>(t(),o("button",{key:n.id,class:"gallery-item",type:"button",onClick:b=>$(n),"aria-label":`Open image ${n.name}`},[e("img",{src:n.previewUrl,alt:n.name,loading:"lazy",decoding:"async"},null,8,Z)],8,Y))),128))])):(t(),o("div",ee,[...r[3]||(r[3]=[e("p",null,"This folder does not have any images yet.",-1)])]))])])):c("",!0),C(A,null,{default:y(()=>[(t(),x(F,{to:"body"},[s(i)?(t(),o("div",{key:0,class:"modal-overlay",onClick:G(p,["self"])},[e("div",te,[e("button",{class:"modal-close",type:"button","aria-label":"Close image preview",onClick:p}," X "),e("img",{src:s(i).fullSizeUrl,alt:s(i).name},null,8,se)])])):c("",!0)]))]),_:1})],64)}}});export{re as default};
