import{_ as E}from"./9muQgpWI.js";import{u as M,_ as T}from"./CZkhVsdt.js";import{g as U,j as V,k as w,l as z,r as D,m as O,n as S,c as o,o as e,p as c,b as C,q as s,a as t,F as d,s as m,w as y,d as j,t as u,v as x,T as q,x as F}from"./IDOWRAUd.js";const G={key:0,class:"empty-state"},P={key:1,class:"empty-state"},I={key:2,class:"page-section"},K={class:"page-header"},Q={class:"breadcrumbs","aria-label":"Breadcrumb"},R={key:0},W={key:0},X={key:0},H={class:"child-grid"},J={key:0,class:"gallery-grid"},Y=["onClick","aria-label"],Z=["src","alt"],ee={key:1,class:"empty-state"},te={class:"modal-content"},se=["src","alt"],re=U({__name:"[...slug]",async setup(oe){let _,g;const f=V(),B=w(()=>{const l=f.params.slug;return l?Array.isArray(l)?l:[l]:[]}),h=w(()=>B.value.filter(Boolean).join("/")),{data:a,pending:L,error:N}=([_,g]=z(()=>M(()=>{const l=h.value?`/api/folders/${h.value}`:"/api/folders";return $fetch(l)},{watch:[()=>f.fullPath],server:!0},"$yCqnlWmzBQ")),_=await _,g(),_),i=D(null),$=l=>{console.log("Opening modal for image:",l.name),i.value=l},p=()=>{i.value=null},k=l=>{l.key==="Escape"&&p()};return O(()=>{window.addEventListener("keydown",k)}),S(()=>{window.removeEventListener("keydown",k)}),(l,r)=>{const v=E,A=T;return e(),o(d,null,[s(N)?(e(),o("section",G,[...r[0]||(r[0]=[t("p",null,"Unable to load this folder. Check your Google Drive credentials and try again.",-1)])])):s(L)&&!s(a)?(e(),o("section",P,[...r[1]||(r[1]=[t("p",null,"Loading portfolioâ€¦",-1)])])):s(a)?(e(),o("section",I,[t("header",K,[t("nav",Q,[(e(!0),o(d,null,m(s(a).breadcrumbs,(n,b)=>(e(),o(d,{key:n.route},[C(v,{to:n.route},{default:y(()=>[j(u(n.label),1)]),_:2},1032,["to"]),b<s(a).breadcrumbs.length-1?(e(),o("span",R,"/")):c("",!0)],64))),128))]),t("div",null,[t("h1",null,u(s(a).name),1),s(a).description?(e(),o("p",W,u(s(a).description),1)):c("",!0)])]),s(a).children.length?(e(),o("section",X,[r[2]||(r[2]=t("p",{class:"section-title"},"Collections",-1)),t("div",H,[(e(!0),o(d,null,m(s(a).children,n=>(e(),x(v,{key:n.id,to:n.route,class:"child-card"},{default:y(()=>[t("h3",null,u(n.name),1),t("span",null,u(n.images.length)+" artworks",1)]),_:2},1032,["to"]))),128))])])):c("",!0),t("section",null,[r[4]||(r[4]=t("p",{class:"section-title"},"Gallery",-1)),s(a).images.length?(e(),o("div",J,[(e(!0),o(d,null,m(s(a).images,n=>(e(),o("button",{key:n.id,class:"gallery-item",type:"button",onClick:b=>$(n),"aria-label":`Open image ${n.name}`},[t("img",{src:n.previewUrl,alt:n.name,loading:"lazy",decoding:"async"},null,8,Z)],8,Y))),128))])):(e(),o("div",ee,[...r[3]||(r[3]=[t("p",null,"This folder does not have any images yet.",-1)])]))])])):c("",!0),C(A,null,{default:y(()=>[(e(),x(q,{to:"body"},[s(i)?(e(),o("div",{key:0,class:"modal-overlay",onClick:F(p,["self"])},[t("div",te,[t("button",{class:"modal-close",type:"button","aria-label":"Close image preview",onClick:p}," X "),t("img",{src:s(i).fullSizeUrl,alt:s(i).name},null,8,se)])])):c("",!0)]))]),_:1})],64)}}});export{re as default};
